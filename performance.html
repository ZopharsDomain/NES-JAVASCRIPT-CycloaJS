<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="js/cycloa/cycloa.js"></script>
	<script type="text/javascript" src="js/cycloa/err.js"></script>
	<script type="text/javascript" src="js/cycloa/util.js"></script>
	<script type="text/javascript" src="js/cycloa/fast.js"></script>
	<script type="text/javascript" src="js/cycloa/trace.js"></script>
	<script type="text/javascript" src="test/processor_debug_board.js"></script>
	<script>
		function log(msg){
			console.log(msg);
		}

		function runMany(){
			for(var i=0;i<1;++i){
				measurePerformance();
			}
		}

		function measurePerformance(){
			var board = new ProcessorDebugBoard();
			var machine = new cycloa.FastMachine(board);
			var tracer = new cycloa.Tracer(machine);
			var start = new Date();

			for(var i = 0; i < 3000; ++i){
				machine.onHardReset();
				machine.PC = 0xC000;
				for(var t = 0; t < 5000; ++t){
					//console.log(tracer.run());
					machine.run();
				}
			}
			var end = new Date();
			var time = (end-start);
			console.log("nclocks: "+board.clock+" /time: "+time+"ms / "+(board.clock/time/1000)+"MHz");
		}
	</script>
	<title>unit test</title>
</head>
<body>
	<input id="start" onclick="runMany()" type="button" value="start" />
</body>
</html>
